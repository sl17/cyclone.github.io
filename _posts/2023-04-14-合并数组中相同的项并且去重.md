---
published: true
layout: post
date: '2023-04-14 16:50:20 +0800'
tags:
  - JS
---
## 合并数组中相同的项并且去重


#### 合并数组中字段相同的项，相同项下面的 list 合并到一起，并且去重

```
<script>
    let arr = [{ "lbsWeight": "40", "name": "C2S WF", "subList": [{ "brand": 1208, "height": "53.34", "id": 12266, "name": "Verso Liberty" }, { "brand": 1208, "height": "60.96", "id": 12270, "name": "Verso Liberty" }], "weight": "59" }, { "lbsWeight": "43", "name": "C2S WF", "subList": [{ "brand": 1208, "height": "58.42", "id": 12267, "name": "Verso Liberty" }], "weight": "64" }, { "lbsWeight": "45", "name": "C2S WF", "subList": [{ "brand": 1208, "height": "60.96", "id": 12268, "name": "Verso Liberty" }, { "brand": 1209, "height": "66.04", "id": 12285, "name": "Verso Influence" }, { "brand": 1208, "height": "71.12", "id": 12271, "name": "Verso Liberty" }], "weight": "67" }, { "lbsWeight": "50", "name": "C2S WF", "subList": [{ "brand": 1269, "height": "70", "id": 13101, "name": "Magno Matt" }], "weight": "70" }, { "lbsWeight": "50", "name": "C2S WF", "subList": [{ "brand": 1208, "height": "68.58", "id": 12269, "name": "Verso Liberty" }, { "brand": 1209, "height": "73.66", "id": 12286, "name": "Verso Influence" }, { "brand": 1208, "height": "76.2", "id": 12272, "name": "Verso Liberty" }], "weight": "74" }, { "lbsWeight": "60", "name": "C2S WF", "subList": [{ "brand": 1211, "height": "76.2", "id": 12326, "name": "Verso Sterling Ultra" }, { "brand": 186, "height": "81", "id": 1259, "name": "Kinmari Ex" }, { "brand": 1211, "height": "81.28", "id": 12331, "name": "Verso Sterling Ultra" }, { "brand": 1209, "height": "86.36", "id": 12287, "name": "Verso Influence" }, { "brand": 1208, "height": "93.98", "id": 12273, "name": "Verso Liberty" }], "weight": "89" }, { "lbsWeight": "70", "name": "C2S WF", "subList": [{ "brand": 1268, "height": "82", "id": 13090, "name": "Magno Satin" }, { "brand": 1269, "height": "100", "id": 13104, "name": "Magno Matt" }], "weight": "100" }, { "lbsWeight": "80", "name": "C2S WF", "subList": [{ "brand": 1210, "height": "101.6", "id": 12302, "name": "Verso Sterling Premium" }, { "brand": 1211, "height": "101.6", "id": 12328, "name": "Verso Sterling Ultra" }, { "brand": 185, "height": "107", "id": 12523, "name": "Hi-Q Titan" }, { "brand": 1210, "height": "110.92", "id": 12310, "name": "Verso Sterling Premium" }, { "brand": 1209, "height": "114.3", "id": 12289, "name": "Verso Influence" }, { "brand": 1211, "height": "114.3", "id": 12333, "name": "Verso Sterling Ultra" }, { "brand": 186, "height": "115", "id": 12521, "name": "Kinmari Ex" }], "weight": "118" }, { "lbsWeight": "80", "name": "C2S WF", "subList": [{ "brand": 179, "height": "102", "id": 12450, "name": "Dong fan" }, { "brand": 171, "height": "106", "id": 12369, "name": "StarBlanc" }, { "brand": 182, "height": "106", "id": 12370, "name": "Huaxia Sun" }, { "brand": 184, "height": "106", "id": 12383, "name": "Snow Eagle" }, { "brand": 180, "height": "114", "id": 12432, "name": "Space shuttle" }], "weight": "120" }, { "lbsWeight": "90", "name": "C2S WF", "subList": [{ "brand": 1268, "height": "106.6", "id": 13092, "name": "Magno Satin" }, { "brand": 1269, "height": "130", "id": 13106, "name": "Magno Matt" }], "weight": "130" }, { "lbsWeight": "90", "name": "C2S WF", "subList": [{ "brand": 185, "height": "124", "id": 12524, "name": "Hi-Q Titan" }], "weight": "135" }, { "lbsWeight": "100", "name": "C2S WF", "subList": [{ "brand": 1210, "height": "127", "id": 12303, "name": "Verso Sterling Premium" }, { "brand": 1211, "height": "127", "id": 12329, "name": "Verso Sterling Ultra" }, { "brand": 1209, "height": "142.24", "id": 12290, "name": "Verso Influence" }, { "brand": 1210, "height": "142.24", "id": 12311, "name": "Verso Sterling Premium" }, { "brand": 1211, "height": "142.24", "id": 12334, "name": "Verso Sterling Ultra" }, { "brand": 184, "height": "145", "id": 12385, "name": "Snow Eagle" }, { "brand": 185, "height": "145", "id": 12525, "name": "Hi-Q Titan" }, { "brand": 186, "height": "146", "id": 12522, "name": "Kinmari Ex" }], "weight": "148" }, { "lbsWeight": "65", "name": "C2S WF", "subList": [{ "brand": 1210, "height": "158.4", "id": 12304, "name": "Verso Sterling Premium" }, { "brand": 1209, "height": "182.88", "id": 12291, "name": "Verso Influence" }, { "brand": 1210, "height": "185.42", "id": 12312, "name": "Verso Sterling Premium" }, { "brand": 1211, "height": "185.42", "id": 12335, "name": "Verso Sterling Ultra" }], "weight": "176" }, { "lbsWeight": "65", "name": "C2S WF", "subList": [{ "brand": 180, "height": "177", "id": 12436, "name": "Space shuttle" }, { "brand": 185, "height": "177", "id": 12527, "name": "Hi-Q Titan" }, { "brand": 1217, "height": "178", "id": 12483, "name": "鲸王" }], "weight": "180" }, { "lbsWeight": "80", "name": "C2S WF", "subList": [{ "brand": 1210, "height": "198.12", "id": 12305, "name": "Verso Sterling Premium" }, { "brand": 1211, "height": "198.12", "id": 12330, "name": "Verso Sterling Ultra" }, { "brand": 1210, "height": "231.139999999999", "id": 12313, "name": "Verso Sterling Premium" }, { "brand": 1211, "height": "231.14", "id": 12336, "name": "Verso Sterling Ultra" }, { "brand": 1209, "height": "238.76", "id": 12292, "name": "Verso Influence" }], "weight": "216" }, { "lbsWeight": "90", "name": "C2S WF", "subList": [{ "brand": 1268, "height": "225", "id": 13096, "name": "Magno Satin" }, { "brand": 1219, "height": "245", "id": 12502, "name": "紫兴SPCO" }, { "brand": 179, "height": "248", "id": 12456, "name": "Dong fan" }, { "brand": 1217, "height": "250", "id": 12485, "name": "鲸王" }, { "brand": 185, "height": "257", "id": 12530, "name": "Hi-Q Titan" }, { "brand": 1269, "height": "257.5", "id": 13110, "name": "Magno Matt" }, { "brand": 184, "height": "265", "id": 1225, "name": "Snow Eagle" }], "weight": "250" }, { "lbsWeight": "100", "name": "C2S WF", "subList": [{ "brand": 1210, "height": "254.74", "id": 12306, "name": "Verso Sterling Premium" }, { "brand": 1210, "height": "295.39", "id": 12314, "name": "Verso Sterling Premium" }], "weight": "271" }, { "lbsWeight": "110", "name": "C2S WF", "subList": [{ "brand": 1268, "height": "282", "id": 13097, "name": "Magno Satin" }, { "brand": 1217, "height": "283", "id": 12486, "name": "鲸王" }, { "brand": 1269, "height": "309", "id": 13111, "name": "Magno Matt" }, { "brand": 179, "height": "313", "id": 12457, "name": "Dong fan" }, { "brand": 185, "height": "320", "id": 12531, "name": "Hi-Q Titan" }], "weight": "300" }, { "lbsWeight": "120", "name": "C2S WF", "subList": [{ "brand": 1210, "height": "312.96", "id": 12307, "name": "Verso Sterling Premium" }], "weight": "326" }, { "lbsWeight": "130", "name": "C2S WF", "subList": [{ "brand": 1268, "height": "346.5", "id": 13098, "name": "Magno Satin" }, { "brand": 179, "height": "365", "id": 12458, "name": "Dong fan" }, { "brand": 1269, "height": "367.5", "id": 13112, "name": "Magno Matt" }], "weight": "350" }, { "lbsWeight": "130", "name": "C2S WF", "subList": [{ "brand": 1210, "height": "341.44", "id": 12308, "name": "Verso Sterling Premium" }], "weight": "352" }, { "lbsWeight": "150", "name": "C2S WF", "subList": [{ "brand": 1268, "height": "412", "id": 13099, "name": "Magno Satin" }, { "brand": 1269, "height": "420", "id": 13113, "name": "Magno Matt" }], "weight": "400" }, { "lbsWeight": "165", "name": "C2S WF", "subList": [{ "brand": 1268, "height": "477", "id": 13100, "name": "Magno Satin" }, { "brand": 1269, "height": "477", "id": 13114, "name": "Magno Matt" }], "weight": "450" }];
    
    let s = new Set()
    arr.map(item=>{
        s.add(item.lbsWeight)
    })
    let arr1 = Array.from(s)
    let arr3 = []
    arr1.map(sitem=>{
        let obj={
            subList:[]
        }
        arr.map(item=>{
            if(item.lbsWeight==sitem){
                obj.lbsWeight = item.lbsWeight;
                obj.subList = obj.subList.concat(item.subList);
            }
        })

        let objs = {};
        let peon = [];
        peon = obj.subList.reduce((cur,next) => {
            objs[next.height] ? "" : objs[next.height] = true && cur.push(next);
            return cur;
        },[]) 
        obj.subList = peon;
        arr3.push(obj)
    })
    console.log((arr3));
//[{"subList":[{"brand":1208,"height":"53.34","id":12266,"name":"Verso Liberty"},{"brand":1208,"height":"60.96","id":12270,"name":"Verso Liberty"}],"lbsWeight":"40"},{"subList":[{"brand":1208,"height":"58.42","id":12267,"name":"Verso Liberty"}],"lbsWeight":"43"},{"subList":[{"brand":1208,"height":"60.96","id":12268,"name":"Verso Liberty"},{"brand":1209,"height":"66.04","id":12285,"name":"Verso Influence"},{"brand":1208,"height":"71.12","id":12271,"name":"Verso Liberty"}],"lbsWeight":"45"},{"subList":[{"brand":1269,"height":"70","id":13101,"name":"Magno Matt"},{"brand":1208,"height":"68.58","id":12269,"name":"Verso Liberty"},{"brand":1209,"height":"73.66","id":12286,"name":"Verso Influence"},{"brand":1208,"height":"76.2","id":12272,"name":"Verso Liberty"}],"lbsWeight":"50"},{"subList":[{"brand":1211,"height":"76.2","id":12326,"name":"Verso Sterling Ultra"},{"brand":186,"height":"81","id":1259,"name":"Kinmari Ex"},{"brand":1211,"height":"81.28","id":12331,"name":"Verso Sterling Ultra"},{"brand":1209,"height":"86.36","id":12287,"name":"Verso Influence"},{"brand":1208,"height":"93.98","id":12273,"name":"Verso Liberty"}],"lbsWeight":"60"},{"subList":[{"brand":1268,"height":"82","id":13090,"name":"Magno Satin"},{"brand":1269,"height":"100","id":13104,"name":"Magno Matt"}],"lbsWeight":"70"},{"subList":[{"brand":1210,"height":"101.6","id":12302,"name":"Verso Sterling Premium"},{"brand":185,"height":"107","id":12523,"name":"Hi-Q Titan"},{"brand":1210,"height":"110.92","id":12310,"name":"Verso Sterling Premium"},{"brand":1209,"height":"114.3","id":12289,"name":"Verso Influence"},{"brand":186,"height":"115","id":12521,"name":"Kinmari Ex"},{"brand":179,"height":"102","id":12450,"name":"Dong fan"},{"brand":171,"height":"106","id":12369,"name":"StarBlanc"},{"brand":180,"height":"114","id":12432,"name":"Space shuttle"},{"brand":1210,"height":"198.12","id":12305,"name":"Verso Sterling Premium"},{"brand":1210,"height":"231.139999999999","id":12313,"name":"Verso Sterling Premium"},{"brand":1211,"height":"231.14","id":12336,"name":"Verso Sterling Ultra"},{"brand":1209,"height":"238.76","id":12292,"name":"Verso Influence"}],"lbsWeight":"80"},{"subList":[{"brand":1268,"height":"106.6","id":13092,"name":"Magno Satin"},{"brand":1269,"height":"130","id":13106,"name":"Magno Matt"},{"brand":185,"height":"124","id":12524,"name":"Hi-Q Titan"},{"brand":1268,"height":"225","id":13096,"name":"Magno Satin"},{"brand":1219,"height":"245","id":12502,"name":"紫兴SPCO"},{"brand":179,"height":"248","id":12456,"name":"Dong fan"},{"brand":1217,"height":"250","id":12485,"name":"鲸王"},{"brand":185,"height":"257","id":12530,"name":"Hi-Q Titan"},{"brand":1269,"height":"257.5","id":13110,"name":"Magno Matt"},{"brand":184,"height":"265","id":1225,"name":"Snow Eagle"}],"lbsWeight":"90"},{"subList":[{"brand":1210,"height":"127","id":12303,"name":"Verso Sterling Premium"},{"brand":1209,"height":"142.24","id":12290,"name":"Verso Influence"},{"brand":184,"height":"145","id":12385,"name":"Snow Eagle"},{"brand":186,"height":"146","id":12522,"name":"Kinmari Ex"},{"brand":1210,"height":"254.74","id":12306,"name":"Verso Sterling Premium"},{"brand":1210,"height":"295.39","id":12314,"name":"Verso Sterling Premium"}],"lbsWeight":"100"},{"subList":[{"brand":1210,"height":"158.4","id":12304,"name":"Verso Sterling Premium"},{"brand":1209,"height":"182.88","id":12291,"name":"Verso Influence"},{"brand":1210,"height":"185.42","id":12312,"name":"Verso Sterling Premium"},{"brand":180,"height":"177","id":12436,"name":"Space shuttle"},{"brand":1217,"height":"178","id":12483,"name":"鲸王"}],"lbsWeight":"65"},{"subList":[{"brand":1268,"height":"282","id":13097,"name":"Magno Satin"},{"brand":1217,"height":"283","id":12486,"name":"鲸王"},{"brand":1269,"height":"309","id":13111,"name":"Magno Matt"},{"brand":179,"height":"313","id":12457,"name":"Dong fan"},{"brand":185,"height":"320","id":12531,"name":"Hi-Q Titan"}],"lbsWeight":"110"},{"subList":[{"brand":1210,"height":"312.96","id":12307,"name":"Verso Sterling Premium"}],"lbsWeight":"120"},{"subList":[{"brand":1268,"height":"346.5","id":13098,"name":"Magno Satin"},{"brand":179,"height":"365","id":12458,"name":"Dong fan"},{"brand":1269,"height":"367.5","id":13112,"name":"Magno Matt"},{"brand":1210,"height":"341.44","id":12308,"name":"Verso Sterling Premium"}],"lbsWeight":"130"},{"subList":[{"brand":1268,"height":"412","id":13099,"name":"Magno Satin"},{"brand":1269,"height":"420","id":13113,"name":"Magno Matt"}],"lbsWeight":"150"},{"subList":[{"brand":1268,"height":"477","id":13100,"name":"Magno Satin"}],"lbsWeight":"165"}]
</script>


```

